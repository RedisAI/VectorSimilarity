/*
 *Copyright Redis Ltd. 2021 - present
 *Licensed under your choice of the Redis Source Available License 2.0 (RSALv2) or
 *the Server Side Public License v1 (SSPLv1).
 */
#define DATA_TYPE double
#include "bm_spaces.h"

// NEON implementation for ARMv8-a
#ifdef OPT_NEON
INITIALIZE_EXACT_512BIT_BM(FP64, NEON, L2, 16);
INITIALIZE_EXACT_128BIT_BM(FP64, NEON, L2, 4);
INITIALIZE_RESIDUAL_BM(FP64, NEON, L2, 16_Residuals);

INITIALIZE_EXACT_512BIT_BM(FP64, NEON, IP, 16);
INITIALIZE_EXACT_128BIT_BM(FP64, NEON, IP, 4);
INITIALIZE_RESIDUAL_BM(FP64, NEON, IP, 16_Residuals);
#endif
// SVE implementation
#ifdef OPT_SVE
INITIALIZE_EXACT_512BIT_BM(FP64, SVE, L2, 16);
INITIALIZE_EXACT_128BIT_BM(FP64, SVE, L2, 4);
INITIALIZE_RESIDUAL_BM(FP64, SVE, L2, 16_Residuals);

INITIALIZE_EXACT_512BIT_BM(FP64, SVE, IP, 16);
INITIALIZE_EXACT_128BIT_BM(FP64, SVE, IP, 4);
INITIALIZE_RESIDUAL_BM(FP64, SVE, IP, 16_Residuals);
#endif
// SVE2 implementation
#ifdef OPT_SVE2
INITIALIZE_EXACT_512BIT_BM(FP64, SVE2, L2, 16);
INITIALIZE_EXACT_128BIT_BM(FP64, SVE2, L2, 4);
INITIALIZE_RESIDUAL_BM(FP64, SVE2, L2, 16_Residuals);

INITIALIZE_EXACT_512BIT_BM(FP64, SVE2, IP, 16);
INITIALIZE_EXACT_128BIT_BM(FP64, SVE2, IP, 4);
INITIALIZE_RESIDUAL_BM(FP64, SVE2, IP, 16_Residuals);
#endif

// AVX512 functions
#ifdef OPT_AVX512F

INITIALIZE_EXACT_512BIT_BM(FP64, AVX512_F, L2, 8);
INITIALIZE_EXACT_128BIT_BM(FP64, AVX512_F, L2, 2);
INITIALIZE_RESIDUAL_BM(FP64, AVX512_F, L2, 8_Residuals);

INITIALIZE_EXACT_512BIT_BM(FP64, AVX512_F, IP, 8);
INITIALIZE_EXACT_128BIT_BM(FP64, AVX512_F, IP, 2);
INITIALIZE_RESIDUAL_BM(FP64, AVX512_F, IP, 8_Residuals);

#endif // AVX512F

// AVX functions
#ifdef OPT_AVX

INITIALIZE_EXACT_512BIT_BM(FP64, AVX, L2, 8);
INITIALIZE_EXACT_128BIT_BM(FP64, AVX, L2, 2);
INITIALIZE_RESIDUAL_BM(FP64, AVX, L2, 8_Residuals);

INITIALIZE_EXACT_512BIT_BM(FP64, AVX, IP, 8);
INITIALIZE_EXACT_128BIT_BM(FP64, AVX, IP, 2);
INITIALIZE_RESIDUAL_BM(FP64, AVX, IP, 8_Residuals);
#endif // AVX

// SSE functions
#ifdef OPT_SSE

INITIALIZE_EXACT_512BIT_BM(FP64, SSE, L2, 8);
INITIALIZE_EXACT_128BIT_BM(FP64, SSE, L2, 2);
INITIALIZE_RESIDUAL_BM(FP64, SSE, L2, 8_Residuals);

INITIALIZE_EXACT_512BIT_BM(FP64, SSE, IP, 8);
INITIALIZE_EXACT_128BIT_BM(FP64, SSE, IP, 2);
INITIALIZE_RESIDUAL_BM(FP64, SSE, IP, 8_Residuals);

#endif // SSE
// Naive algorithms

INITIALIZE_NAIVE_BM(FP64, InnerProduct)->EXACT_512BIT_PARAMS->RESIDUAL_PARAMS;
INITIALIZE_NAIVE_BM(FP64, L2Sqr)->EXACT_512BIT_PARAMS->RESIDUAL_PARAMS;

// Naive

BENCHMARK_MAIN();
